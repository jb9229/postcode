<input type="text" id="sample5_address" placeholder="주소" />
<input
  type="button"
  onclick="sample5_execDaumPostcode()"
  value="주소 검색"
/><br />
<div
  id="wrap"
  style="display:none;border:1px solid;width:auto;height:350px;margin:5px 0;position:relative"
>
  <img
    src="//t1.daumcdn.net/localimg/localimages/07/postcode/320/close.png"
    id="btnFoldWrap_1"
    style="cursor:pointer;position:absolute;right:0px;top:-1px;z-index:1"
    onclick="foldDaumPostcode()"
    alt="접기 버튼"
  />
</div>
<div
  id="map"
  style="width:300px;height:300px;margin-top:10px;display:none"
></div>

<script src="https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js"></script>
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=e58edd180ca9edbac661ded4969a2348&libraries=services"></script>
<script>
  // 우편번호 찾기 찾기 화면을 넣을 element
  var element_wrap = document.getElementById("wrap");

  var mapContainer = document.getElementById("map"), // 지도를 표시할 div
    mapOption = {
      center: new daum.maps.LatLng(37.537187, 127.005476), // 지도의 중심좌표
      level: 5 // 지도의 확대 레벨
    };

  //지도를 미리 생성
  var map = new daum.maps.Map(mapContainer, mapOption);
  //주소-좌표 변환 객체를 생성
  var geocoder = new daum.maps.services.Geocoder();
  //마커를 미리 생성
  var marker = new daum.maps.Marker({
    position: new daum.maps.LatLng(37.537187, 127.005476),
    map: map
  });

  function foldDaumPostcode() {
    // iframe을 넣은 element를 안보이게 한다.
    element_wrap.style.display = "none";
  }

  function sample5_execDaumPostcode() {
    // 현재 scroll 위치를 저장해놓는다.
    var currentScroll = Math.max(
      document.body.scrollTop,
      document.documentElement.scrollTop
    );
    new daum.Postcode({
      oncomplete: function(data) {
        var addr = data.address; // 최종 주소 변수

        // 주소 정보를 해당 필드에 넣는다.
        document.getElementById("sample5_address").value = addr;
        // 주소로 상세 정보를 검색
        geocoder.addressSearch(data.address, function(results, status) {
          // 정상적으로 검색이 완료됐으면
          if (status === daum.maps.services.Status.OK) {
            var result = results[0]; //첫번째 결과의 값을 활용

            // 해당 주소에 대한 좌표를 받아서
            var coords = new daum.maps.LatLng(result.y, result.x);
            // 지도를 보여준다.
            mapContainer.style.display = "block";
            map.relayout();
            // 지도 중심을 변경한다.
            map.setCenter(coords);
            // 마커를 결과값으로 받은 위치로 옮긴다.
            marker.setPosition(coords);
          }
        });
      },
      // 우편번호 찾기 화면 크기가 조정되었을때 실행할 코드를 작성하는 부분. iframe을 넣은 element의 높이값을 조정한다.
      onresize: function(size) {
        element_wrap.style.height = size.height + "px";
      },
      width: "100%",
      height: "100%"
    }).embed(element_wrap);

    // iframe을 넣은 element를 보이게 한다.
    element_wrap.style.display = "block";
  }
</script>
